{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/v1/media-buy/sync-creatives-response.json",
  "title": "Sync Creatives Response",
  "description": "Response from creative sync operation with detailed results and bulk operation summary",
  "type": "object",
  "properties": {
    "adcp_version": {
      "type": "string",
      "description": "AdCP schema version used for this response",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "message": {
      "type": "string",
      "description": "Human-readable result message summarizing the sync operation"
    },
    "context_id": {
      "type": "string",
      "description": "Context ID for tracking async operations"
    },
    "dry_run": {
      "type": "boolean",
      "description": "Whether this was a dry run (no actual changes made)"
    },
    "summary": {
      "type": "object",
      "description": "High-level summary of sync operation results",
      "properties": {
        "total_processed": {
          "type": "integer",
          "description": "Total number of creatives processed",
          "minimum": 0
        },
        "created": {
          "type": "integer",
          "description": "Number of new creatives created",
          "minimum": 0
        },
        "updated": {
          "type": "integer",
          "description": "Number of existing creatives updated",
          "minimum": 0
        },
        "unchanged": {
          "type": "integer",
          "description": "Number of creatives that were already up-to-date",
          "minimum": 0
        },
        "failed": {
          "type": "integer",
          "description": "Number of creatives that failed validation or processing",
          "minimum": 0
        },
        "deleted": {
          "type": "integer",
          "description": "Number of creatives deleted/archived (when delete_missing=true)",
          "minimum": 0
        }
      },
      "required": [
        "total_processed",
        "created",
        "updated",
        "unchanged",
        "failed"
      ],
      "additionalProperties": false
    },
    "results": {
      "type": "array",
      "description": "Detailed results for each creative processed",
      "items": {
        "type": "object",
        "properties": {
          "creative_id": {
            "type": "string",
            "description": "Creative ID from the request"
          },
          "action": {
            "type": "string",
            "enum": [
              "created",
              "updated",
              "unchanged",
              "failed",
              "deleted"
            ],
            "description": "Action taken for this creative"
          },
          "status": {
            "$ref": "/schemas/v1/enums/creative-status.json",
            "description": "Current approval status of the creative"
          },
          "platform_id": {
            "type": "string",
            "description": "Platform-specific ID assigned to the creative"
          },
          "changes": {
            "type": "array",
            "description": "List of field names that were modified (for 'updated' action)",
            "items": {
              "type": "string"
            }
          },
          "errors": {
            "type": "array",
            "description": "Validation or processing errors (for 'failed' action)",
            "items": {
              "type": "string"
            }
          },
          "warnings": {
            "type": "array",
            "description": "Non-fatal warnings about this creative",
            "items": {
              "type": "string"
            }
          },
          "review_feedback": {
            "type": "string",
            "description": "Feedback from platform review process"
          },
          "suggested_adaptations": {
            "type": "array",
            "description": "Recommended creative adaptations for better performance",
            "items": {
              "type": "object",
              "properties": {
                "adaptation_id": {
                  "type": "string",
                  "description": "Unique identifier for this adaptation"
                },
                "format_id": {
                  "type": "string",
                  "description": "Target format ID for the adaptation"
                },
                "name": {
                  "type": "string",
                  "description": "Suggested name for the adapted creative"
                },
                "description": {
                  "type": "string",
                  "description": "What this adaptation does"
                },
                "estimated_performance_lift": {
                  "type": "number",
                  "description": "Expected performance improvement (percentage)"
                }
              },
              "required": [
                "adaptation_id",
                "format_id",
                "name",
                "description"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "creative_id",
          "action"
        ],
        "additionalProperties": false
      }
    },
    "assignments_summary": {
      "type": "object",
      "description": "Summary of assignment operations (when assignments were included in request)",
      "properties": {
        "total_assignments_processed": {
          "type": "integer",
          "description": "Total number of creative-package assignment operations processed",
          "minimum": 0
        },
        "assigned": {
          "type": "integer",
          "description": "Number of successful creative-package assignments",
          "minimum": 0
        },
        "unassigned": {
          "type": "integer",
          "description": "Number of creative-package unassignments",
          "minimum": 0
        },
        "failed": {
          "type": "integer",
          "description": "Number of assignment operations that failed",
          "minimum": 0
        }
      },
      "required": [
        "total_assignments_processed",
        "assigned",
        "unassigned",
        "failed"
      ],
      "additionalProperties": false
    },
    "assignment_results": {
      "type": "array",
      "description": "Detailed assignment results (when assignments were included in request)",
      "items": {
        "type": "object",
        "properties": {
          "creative_id": {
            "type": "string",
            "description": "Creative that was assigned/unassigned"
          },
          "assigned_packages": {
            "type": "array",
            "description": "Packages successfully assigned to this creative",
            "items": {
              "type": "string"
            }
          },
          "unassigned_packages": {
            "type": "array",
            "description": "Packages successfully unassigned from this creative",
            "items": {
              "type": "string"
            }
          },
          "failed_packages": {
            "type": "array",
            "description": "Packages that failed to assign/unassign",
            "items": {
              "type": "object",
              "properties": {
                "package_id": {
                  "type": "string",
                  "description": "Package ID that failed"
                },
                "error": {
                  "type": "string",
                  "description": "Error message for the failed assignment"
                }
              },
              "required": [
                "package_id",
                "error"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "creative_id"
        ],
        "additionalProperties": false
      }
    }
  },
  "required": [
    "adcp_version",
    "message",
    "summary",
    "results"
  ],
  "additionalProperties": false
}
