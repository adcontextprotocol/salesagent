# Commitizen Configuration

This project uses Commitizen for automated version management and changelog generation.

## Commit Message Format

Follow the [Conventional Commits](https://www.conventionalcommits.org/) format:

```
<type>(<scope>): <subject>

[optional body]

[optional footer(s)]
```

## Commit Types

| Type | Description | Version Bump | Example |
|------|-------------|--------------|---------|
| `feat` | New feature | minor (0.1.0 → 0.2.0) | `feat: add OAuth support` |
| `fix` | Bug fix | patch (0.1.0 → 0.1.1) | `fix: correct validation error` |
| `docs` | Documentation | none | `docs: update README` |
| `test` | Tests | none | `test: add unit tests` |
| `chore` | Tooling/build | none | `chore: update dependencies` |
| `refactor` | Code refactoring | none | `refactor: simplify auth logic` |
| `perf` | Performance | patch | `perf: optimize query` |
| `style` | Code style | none | `style: format with black` |
| `ci` | CI/CD changes | none | `ci: add test workflow` |
| `build` | Build system | none | `build: update docker config` |

## Breaking Changes

For breaking changes, use `!` after type or add `BREAKING CHANGE:` in footer:

```bash
# Method 1: Using !
git commit -m "feat!: redesign API format"

# Method 2: Using footer
git commit -m "feat: redesign API format

BREAKING CHANGE: Response format changed from {data} to {result}"
```

Breaking changes trigger a major version bump (0.1.0 → 1.0.0).

## Scope (Optional)

Use scope to specify what part of codebase is affected:

```bash
git commit -m "feat(gam): add video creative support"
git commit -m "fix(auth): prevent token race condition"
git commit -m "docs(api): update MCP tool documentation"
```

Common scopes: `gam`, `auth`, `api`, `mcp`, `a2a`, `admin`, `db`

## Commands

```bash
# Interactive commit (recommended for beginners)
uv run cz commit

# Check commit message format
uv run cz check

# Check all commits in a range
uv run cz check --rev-range main..HEAD

# Bump version (done automatically by CI)
uv run cz bump

# Show current version
uv run cz version
```

## CI Automation

- **On PR**: `commitizen-check.yml` validates all commits follow format
- **On merge to main**: `release.yml` automatically bumps version and updates changelog
- **No manual steps**: Just write good commit messages!

## Examples

### Good Commits ✅

```bash
feat: add webhook support for media buy events
fix: correct timezone handling in campaign scheduling
docs: add deployment guide for Kubernetes
test: add integration tests for A2A protocol
chore: update commitizen to v3.29.0
refactor: simplify GAM adapter error handling
perf: optimize database query for large tenants
```

### Bad Commits ❌

```bash
update code                    # ❌ No type
feat add feature              # ❌ Missing colon
FIX: bug                      # ❌ Type should be lowercase
feat(GAM): new feature        # ❌ Scope should be lowercase
```

## Tips

1. **Be specific**: "feat: add OAuth" is better than "feat: update auth"
2. **Use imperative mood**: "add feature" not "adds feature" or "added feature"
3. **Keep subject under 72 characters**
4. **Use body for details**: Subject is a summary, body explains why
5. **Reference issues**: "Closes #123" in footer to auto-close issues

## Resources

- [Conventional Commits Specification](https://www.conventionalcommits.org/)
- [Commitizen Documentation](https://commitizen-tools.github.io/commitizen/)
- [Angular Commit Guidelines](https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit) (similar format)
