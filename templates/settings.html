{% extends "base.html" %}

{% block title %}Settings - AdCP Admin{% endblock %}

{% block content %}
<div class="card">
    <h2>Tenant Management Settings</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 4px; border-left: 4px solid #007bff;">
        <h3>Google Ad Manager OAuth Configuration</h3>
        <p style="margin-bottom: 1rem; color: #666;">
            GAM OAuth credentials are now configured via environment variables for better security and deployment simplicity.
        </p>

        <div class="form-group">
            <label>OAuth Client ID Status</label>
            <div style="padding: 0.5rem; background: {{ '#d4edda' if gam_configured else '#f8d7da' }}; border-radius: 4px; border: 1px solid {{ '#c3e6cb' if gam_configured else '#f5c6cb' }};">
                {% if gam_configured %}
                <span style="color: #155724;">✓ Configured: {{ gam_client_id_prefix }}</span>
                {% else %}
                <span style="color: #721c24;">✗ Not configured</span>
                {% endif %}
            </div>
        </div>

        <div class="form-group">
            <label>OAuth Client Secret Status</label>
            <div style="padding: 0.5rem; background: {{ '#d4edda' if gam_configured else '#f8d7da' }}; border-radius: 4px; border: 1px solid {{ '#c3e6cb' if gam_configured else '#f5c6cb' }};">
                {% if gam_configured %}
                <span style="color: #155724;">✓ Configured</span>
                {% else %}
                <span style="color: #721c24;">✗ Not configured</span>
                {% endif %}
            </div>
        </div>

        <div style="background: #fff3cd; padding: 1rem; border-radius: 4px; margin: 1rem 0; border: 1px solid #ffeaa7;">
            <h4 style="margin-top: 0; color: #856404;">Environment Variable Setup:</h4>
            <p style="color: #856404; margin-bottom: 0.5rem;">Set these environment variables:</p>
            <code style="display: block; background: #f8f9fa; padding: 0.5rem; border-radius: 4px; margin: 0.5rem 0;">
                GAM_OAUTH_CLIENT_ID=your-client-id.apps.googleusercontent.com<br>
                GAM_OAUTH_CLIENT_SECRET=your-client-secret
            </code>
            <p style="color: #856404; margin-top: 0.5rem; font-size: 0.9rem;">
                For Docker: Add to your .env file<br>
                For Fly.io: Use <code>fly secrets set GAM_OAUTH_CLIENT_ID=... GAM_OAUTH_CLIENT_SECRET=...</code>
            </p>
        </div>

        <div style="background: #e3f2fd; padding: 1rem; border-radius: 4px; margin: 1rem 0;">
            <h4 style="margin-top: 0;">How to get OAuth credentials:</h4>
            <ol style="margin-left: 1.5rem; margin-bottom: 0;">
                <li>Go to <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a></li>
                <li>Create or select a project</li>
                <li>Enable the Google Ad Manager API</li>
                <li>Create OAuth 2.0 credentials (Web application type)</li>
                <li>Add authorized redirect URIs for your OAuth flow</li>
                <li>Set the Client ID and Client Secret as environment variables</li>
            </ol>
        </div>

        <a href="/" class="btn btn-secondary">Back to Dashboard</a>
    </div>
</div>
{% endblock %}
